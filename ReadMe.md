# Проект для получения данных о компаниях и вакансиях с сайта hh.ru и загрузки в БД PostgreSQL

Этот проект предназначен для получения данных о компаниях и вакансиях с сайта hh.ru, создания таблиц в БД PostgreSQL и 
загрузки полученных данных в созданные таблицы.

## Требования

Для запуска программы вам понадобится:

- Python 3.6 или выше
- Библиотеки Python: requests, psycopg2

## Получение данных

Для получения данных с сайта hh.ru используется библиотека requests и парсинг компаний, 
зарегистрированных на HH.ru на 
территории РФ, с помощью функции 'get_companies'по ключевому слову, которое вы вводите по запросу запуска кода
например: "Введите словосочетание для области поиска вакансий"   - "IT дизайн"
Вы можете изменить параметры поиска,введя другие ключевые слова в соответствии со своими 
интересами

## Создание и загрузка данных в БД PostgreSQL

Для создания таблиц в БД PostgreSQL используется Python-модуль psycopg2. 
Вы можете создать таблицы, выполнив скрипт `CREATE TABLE` из файла `queries.sql` в среде, поддерживающей SQL, 
или с помощью функции main.py, которая обращается к методу `create_tables(self)` класса `DBManager` 
в модуле `dbmanager.py`. 

## Методы для работы с вакансиями 

Помимо прочего Класс `DBManager` содержит следующие методы:
- `get_companies_and_vacancies_count()`: получает список всех компаний и количество вакансий у каждой компании.
- `get_all_vacancies()`: получает список всех вакансий с указанием названия компании, названия вакансии и зарплаты 
и ссылки на вакансию.
- `get_avg_salary()`: получает среднюю зарплату по вакансиям.
- `get_vacancies_with_higher_salary()`: получает список всех вакансий, у которых зарплата выше средней 
по всем вакансиям.
- `get_vacancies_with_keyword()`: получает список всех вакансий, в названии которых содержатся переданные в метод слова, 
например “python”.

Результаты, полученные с помощью данных методов, выводятся автоматически при запуске главной функции  `main.py`

## Как запустить

1. Скачайте и установите необходимые библиотеки Python, перечисленные в секции "Требования".

2. Скачайте все файлы из репозитория в локальную папку.

3. Откройте файл `dbmanager.py`, введите параметры подключения к вашей БД PostgreSQL
Например: `(dbname='postgres', user='user', password='password', host='localhost',
                                     port=5432)`
4. Откройте файл `main.py` и запустите его. Введите запрашиваемые в коде ключевые слова для сужения поиска. 
Полученные данные о компаниях и вакансиях по  будут сохранены в переменных 
`companies` и `vacancies`. Далее код создаст таблицы в вашей БД,  загрузит полученные данные 
и выведет информацию, полученную с помощью методов работы с вакансиями класса `DBManager`,
перечисленные в секции "Методы для работы с вакансиями".